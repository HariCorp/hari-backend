{
  "info": {
    "_postman_id": "a1b2c3d4-e5f6-g7h8-i9j0-k1l2m3n4o5p6",
    "name": "Review Service API",
    "description": "Collection các API liên quan đến đánh giá sản phẩm",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Tạo đánh giá mới",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{access_token}}",
            "description": "JWT token xác thực người dùng"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"productId\": \"65f2a1b3c4d5e6f7g8h9i0j1\",\n  \"rating\": 5,\n  \"comment\": \"Sản phẩm rất tốt, đúng như mô tả. Giao hàng nhanh và đóng gói cẩn thận.\",\n  \"title\": \"Rất hài lòng với sản phẩm\"\n}"
        },
        "url": {
          "raw": "http://localhost:3000/api/reviews",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "reviews"]
        },
        "description": "Tạo một đánh giá mới cho sản phẩm. Yêu cầu người dùng đã đăng nhập."
      },
      "response": [
        {
          "name": "Tạo đánh giá thành công",
          "originalRequest": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productId\": \"65f2a1b3c4d5e6f7g8h9i0j1\",\n  \"rating\": 5,\n  \"comment\": \"Sản phẩm rất tốt, đúng như mô tả. Giao hàng nhanh và đóng gói cẩn thận.\",\n  \"title\": \"Rất hài lòng với sản phẩm\"\n}"
            },
            "url": {
              "raw": "http://localhost:3000/api/reviews",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["api", "reviews"]
            }
          },
          "status": "OK",
          "code": 201,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json; charset=utf-8"
            }
          ],
          "cookie": [],
          "body": "{\n  \"success\": true,\n  \"data\": {\n    \"_id\": \"65f2a1b3c4d5e6f7g8h9i0j2\",\n    \"productId\": \"65f2a1b3c4d5e6f7g8h9i0j1\",\n    \"userId\": \"65f2a1b3c4d5e6f7g8h9i0j3\",\n    \"rating\": 5,\n    \"comment\": \"Sản phẩm rất tốt, đúng như mô tả. Giao hàng nhanh và đóng gói cẩn thận.\",\n    \"title\": \"Rất hài lòng với sản phẩm\",\n    \"createdAt\": \"2023-09-15T10:30:00.000Z\",\n    \"updatedAt\": \"2023-09-15T10:30:00.000Z\"\n  },\n  \"message\": \"Tạo đánh giá thành công\"\n}"
        },
        {
          "name": "Lỗi khi tạo đánh giá - Thiếu thông tin",
          "originalRequest": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productId\": \"65f2a1b3c4d5e6f7g8h9i0j1\",\n  \"rating\": 6,\n  \"title\": \"Rất hài lòng với sản phẩm\"\n}"
            },
            "url": {
              "raw": "http://localhost:3000/api/reviews",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["api", "reviews"]
            }
          },
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json; charset=utf-8"
            }
          ],
          "cookie": [],
          "body": "{\n  \"success\": false,\n  \"error\": {\n    \"statusCode\": 400,\n    \"message\": [\n      \"Đánh giá phải từ 1 đến 5 sao\",\n      \"Nội dung đánh giá không được để trống\"\n    ],\n    \"error\": \"Bad Request\"\n  }\n}"
        }
      ]
    },
    {
      "name": "Lấy tất cả đánh giá",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:3000/api/reviews?page=1&limit=10&sortBy=createdAt&sortOrder=desc",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "reviews"],
          "query": [
            {
              "key": "page",
              "value": "1",
              "description": "Số trang"
            },
            {
              "key": "limit",
              "value": "10",
              "description": "Số lượng kết quả trên mỗi trang"
            },
            {
              "key": "sortBy",
              "value": "createdAt",
              "description": "Sắp xếp theo trường"
            },
            {
              "key": "sortOrder",
              "value": "desc",
              "description": "Thứ tự sắp xếp (asc/desc)"
            }
          ]
        },
        "description": "Lấy danh sách tất cả các đánh giá với phân trang và sắp xếp"
      },
      "response": [
        {
          "name": "Lấy danh sách đánh giá thành công",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/reviews?page=1&limit=10&sortBy=createdAt&sortOrder=desc",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["api", "reviews"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "sortBy",
                  "value": "createdAt"
                },
                {
                  "key": "sortOrder",
                  "value": "desc"
                }
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json; charset=utf-8"
            }
          ],
          "cookie": [],
          "body": "{\n  \"success\": true,\n  \"data\": {\n    \"reviews\": [\n      {\n        \"_id\": \"65f2a1b3c4d5e6f7g8h9i0j2\",\n        \"productId\": \"65f2a1b3c4d5e6f7g8h9i0j1\",\n        \"userId\": \"65f2a1b3c4d5e6f7g8h9i0j3\",\n        \"rating\": 5,\n        \"comment\": \"Sản phẩm rất tốt, đúng như mô tả. Giao hàng nhanh và đóng gói cẩn thận.\",\n        \"title\": \"Rất hài lòng với sản phẩm\",\n        \"createdAt\": \"2023-09-15T10:30:00.000Z\",\n        \"updatedAt\": \"2023-09-15T10:30:00.000Z\"\n      },\n      {\n        \"_id\": \"65f2a1b3c4d5e6f7g8h9i0j4\",\n        \"productId\": \"65f2a1b3c4d5e6f7g8h9i0j5\",\n        \"userId\": \"65f2a1b3c4d5e6f7g8h9i0j6\",\n        \"rating\": 4,\n        \"comment\": \"Sản phẩm tốt, nhưng giao hàng hơi chậm.\",\n        \"title\": \"Sản phẩm chất lượng\",\n        \"createdAt\": \"2023-09-14T15:45:00.000Z\",\n        \"updatedAt\": \"2023-09-14T15:45:00.000Z\"\n      }\n    ],\n    \"total\": 25,\n    \"page\": 1,\n    \"limit\": 10,\n    \"totalPages\": 3,\n    \"hasNextPage\": true,\n    \"hasPreviousPage\": false\n  }\n}"
        }
      ]
    },
    {
      "name": "Lấy đánh giá theo ID sản phẩm",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:3000/api/reviews/product/65f2a1b3c4d5e6f7g8h9i0j1?page=1&limit=10&rating=5",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "reviews", "product", "65f2a1b3c4d5e6f7g8h9i0j1"],
          "query": [
            {
              "key": "page",
              "value": "1"
            },
            {
              "key": "limit",
              "value": "10"
            },
            {
              "key": "rating",
              "value": "5",
              "description": "Lọc theo số sao đánh giá"
            }
          ]
        },
        "description": "Lấy danh sách đánh giá cho một sản phẩm cụ thể với bộ lọc"
      },
      "response": [
        {
          "name": "Lấy đánh giá theo sản phẩm thành công",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/reviews/product/65f2a1b3c4d5e6f7g8h9i0j1?page=1&limit=10&rating=5",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["api", "reviews", "product", "65f2a1b3c4d5e6f7g8h9i0j1"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "rating",
                  "value": "5"
                }
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json; charset=utf-8"
            }
          ],
          "cookie": [],
          "body": "{\n  \"success\": true,\n  \"data\": {\n    \"reviews\": [\n      {\n        \"_id\": \"65f2a1b3c4d5e6f7g8h9i0j2\",\n        \"productId\": \"65f2a1b3c4d5e6f7g8h9i0j1\",\n        \"userId\": \"65f2a1b3c4d5e6f7g8h9i0j3\",\n        \"rating\": 5,\n        \"comment\": \"Sản phẩm rất tốt, đúng như mô tả. Giao hàng nhanh và đóng gói cẩn thận.\",\n        \"title\": \"Rất hài lòng với sản phẩm\",\n        \"createdAt\": \"2023-09-15T10:30:00.000Z\",\n        \"updatedAt\": \"2023-09-15T10:30:00.000Z\"\n      }\n    ],\n    \"total\": 1,\n    \"page\": 1,\n    \"limit\": 10,\n    \"totalPages\": 1,\n    \"hasNextPage\": false,\n    \"hasPreviousPage\": false\n  }\n}"
        },
        {
          "name": "Lỗi ID sản phẩm không hợp lệ",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/reviews/product/invalid-id",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["api", "reviews", "product", "invalid-id"]
            }
          },
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json; charset=utf-8"
            }
          ],
          "cookie": [],
          "body": "{\n  \"success\": false,\n  \"error\": {\n    \"statusCode\": 400,\n    \"message\": \"Invalid product ID format\",\n    \"error\": \"Bad Request\"\n  }\n}"
        }
      ]
    },
    {
      "name": "Lấy chi tiết một đánh giá",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:3000/api/reviews/65f2a1b3c4d5e6f7g8h9i0j2",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "reviews", "65f2a1b3c4d5e6f7g8h9i0j2"]
        },
        "description": "Lấy thông tin chi tiết của một đánh giá theo ID"
      },
      "response": [
        {
          "name": "Lấy chi tiết đánh giá thành công",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/reviews/65f2a1b3c4d5e6f7g8h9i0j2",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["api", "reviews", "65f2a1b3c4d5e6f7g8h9i0j2"]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json; charset=utf-8"
            }
          ],
          "cookie": [],
          "body": "{\n  \"success\": true,\n  \"data\": {\n    \"_id\": \"65f2a1b3c4d5e6f7g8h9i0j2\",\n    \"productId\": \"65f2a1b3c4d5e6f7g8h9i0j1\",\n    \"userId\": \"65f2a1b3c4d5e6f7g8h9i0j3\",\n    \"rating\": 5,\n    \"comment\": \"Sản phẩm rất tốt, đúng như mô tả. Giao hàng nhanh và đóng gói cẩn thận.\",\n    \"title\": \"Rất hài lòng với sản phẩm\",\n    \"createdAt\": \"2023-09-15T10:30:00.000Z\",\n    \"updatedAt\": \"2023-09-15T10:30:00.000Z\"\n  }\n}"
        },
        {
          "name": "Lỗi không tìm thấy đánh giá",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/reviews/65f2a1b3c4d5e6f7g8h9i0j9",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["api", "reviews", "65f2a1b3c4d5e6f7g8h9i0j9"]
            }
          },
          "status": "Not Found",
          "code": 404,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json; charset=utf-8"
            }
          ],
          "cookie": [],
          "body": "{\n  \"success\": false,\n  \"error\": {\n    \"statusCode\": 404,\n    \"message\": \"Review with ID 65f2a1b3c4d5e6f7g8h9i0j9 not found\",\n    \"error\": \"Not Found\"\n  }\n}"
        }
      ]
    },
    {
      "name": "Cập nhật đánh giá",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{access_token}}",
            "description": "JWT token xác thực người dùng"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"rating\": 4,\n  \"comment\": \"Sản phẩm khá tốt, nhưng có một vài chi tiết nhỏ chưa hoàn thiện.\",\n  \"title\": \"Sản phẩm tốt\"\n}"
        },
        "url": {
          "raw": "http://localhost:3000/api/reviews/65f2a1b3c4d5e6f7g8h9i0j2",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "reviews", "65f2a1b3c4d5e6f7g8h9i0j2"]
        },
        "description": "Cập nhật thông tin của một đánh giá. Yêu cầu người dùng đã đăng nhập và là chủ sở hữu của đánh giá."
      },
      "response": [
        {
          "name": "Cập nhật đánh giá thành công",
          "originalRequest": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 4,\n  \"comment\": \"Sản phẩm khá tốt, nhưng có một vài chi tiết nhỏ chưa hoàn thiện.\",\n  \"title\": \"Sản phẩm tốt\"\n}"
            },
            "url": {
              "raw": "http://localhost:3000/api/reviews/65f2a1b3c4d5e6f7g8h9i0j2",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["api", "reviews", "65f2a1b3c4d5e6f7g8h9i0j2"]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json; charset=utf-8"
            }
          ],
          "cookie": [],
          "body": "{\n  \"success\": true,\n  \"data\": {\n    \"_id\": \"65f2a1b3c4d5e6f7g8h9i0j2\",\n    \"productId\": \"65f2a1b3c4d5e6f7g8h9i0j1\",\n    \"userId\": \"65f2a1b3c4d5e6f7g8h9i0j3\",\n    \"rating\": 4,\n    \"comment\": \"Sản phẩm khá tốt, nhưng có một vài chi tiết nhỏ chưa hoàn thiện.\",\n    \"title\": \"Sản phẩm tốt\",\n    \"createdAt\": \"2023-09-15T10:30:00.000Z\",\n    \"updatedAt\": \"2023-09-15T11:45:00.000Z\"\n  },\n  \"message\": \"Cập nhật đánh giá thành công\"\n}"
        },
        {
          "name": "Lỗi không có quyền cập nhật",
          "originalRequest": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 3,\n  \"comment\": \"Sản phẩm bình thường\",\n  \"title\": \"Đánh giá trung bình\"\n}"
            },
            "url": {
              "raw": "http://localhost:3000/api/reviews/65f2a1b3c4d5e6f7g8h9i0j4",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["api", "reviews", "65f